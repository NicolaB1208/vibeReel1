<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Podcast Vertical Cropper</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
  </head>
  <body>
    <main>
      <h1>Podcast Vertical Cropper</h1>
      <p>Select the frames that will build the two-person vertical video.</p>

      {% if video_url %}
      <section>
        <div id="video-wrapper">
          <video id="source-video" controls crossorigin="anonymous">
            <source src="{{ video_url }}" type="{{ video_mime }}" />
            Your browser does not support the video tag.
          </video>
          <div id="selection-overlay" class="hidden">
            <div id="rect-speaker-1" class="selection-rect">
              <span>Speaker 1</span>
            </div>
            <div id="rect-speaker-2" class="selection-rect">
              <span>Speaker 2</span>
            </div>
          </div>
        </div>
        <div>
          <button id="confirm-selection" type="button">Export speaker clips</button>
          <p>Rectangles keep a 1.1:1 format for vertical stacking.</p>
        </div>
        <div id="feedback" role="status" aria-live="polite"></div>
        <div id="exports"></div>
      </section>
      {% else %}
      <section>
        <p>No video found. Drop a podcast recording in <code>data/raw</code> and refresh this page.</p>
      </section>
      {% endif %}
    </main>

    <script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
  </body>
</html>
